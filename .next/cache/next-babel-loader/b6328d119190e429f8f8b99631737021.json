{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/arifin/Documents/pretest/dashboard/src/components/BookPerDay.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport { Row, Col, Card, Form, InputGroup, FormControl, Button, Table } from \"react-bootstrap\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { formatCurrency } from \"libs/numbers\";\nimport SelectDuration from \"components/SelectDuration\";\nimport Calendar from \"react-calendar\";\nimport dayjs from \"dayjs\";\n\nvar isSameOrAfter = require(\"dayjs/plugin/isSameOrAfter\");\n\nvar isSameOrBefore = require(\"dayjs/plugin/isSameOrBefore\");\n\ndayjs.extend(isSameOrAfter);\ndayjs.extend(isSameOrBefore);\nimport { getProduct as _getProduct } from \"redux/actions/product\";\nimport { getProductSchedulesPerDay as _getProductSchedulesPerDay, selectDateSchedule as _selectDateSchedule, selectRentTime as _selectRentTime, deselectRentTime as _deselectRentTime } from \"redux/actions/product_schedule\"; // import { showLoadingSpinner, hideLoadingSpinner } from \"./Layout\";\n\nvar listDurationTime = [// Pagi\n\"01.00 - 02.00\", \"02.00 - 03.00\", \"03.00 - 04.00\", \"04.00 - 05.00\", \"05.00 - 06.00\", \"06.00 - 07.00\", \"07.00 - 08.00\", \"08.00 - 09.00\", \"09.00 - 10.00\", \"10.00 - 11.00\", \"11.00 - 12.00\", // Siang - Sore\n\"12.00 - 13.00\", \"13.00 - 14.00\", \"14.00 - 15.00\", \"15.00 - 16.00\", \"16.00 - 17.00\", // Malam\n\"17.00 - 18.00\", \"18.00 - 19.00\", \"19.00 - 20.00\", \"20.00 - 21.00\", \"21.00 - 22.00\", \"22.00 - 23.00\", \"23.00 - 24.00\"];\n\nvar BookPerDay = /*#__PURE__*/function (_Component) {\n  _inherits(BookPerDay, _Component);\n\n  var _super = _createSuper(BookPerDay);\n\n  function BookPerDay() {\n    var _this;\n\n    _classCallCheck(this, BookPerDay);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      // defaultViewListText: \"60 Minutes\",\n      // viewList: [\n      //   { id: \"30\", name: \"30 Minutes\" },\n      //   { id: \"60\", name: \"60 Minutes\" },\n      //   { id: \"90\", name: \"90 Minutes\" },\n      //   { id: \"120\", name: \"120 Minutes\" },\n      // ],\n      calendarValue: new Date(),\n      indexedRentTime: {},\n      indexedStatusRentTime: {}\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"rebuildRentTime\", /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(opts) {\n        var schedules, indexedStatusRentTime, _iterator, _step, duration, splitted, start, finish, _iterator2, _step2, schedule;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _this.props.getProductSchedulesPerDay(opts);\n\n              case 2:\n                schedules = _context.sent;\n                indexedStatusRentTime = {};\n                _iterator = _createForOfIteratorHelper(listDurationTime);\n\n                try {\n                  for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                    duration = _step.value;\n                    splitted = duration.split(\" - \");\n                    start = dayjs(_this.props.selectedDateSchedule.fullDate).startOf(\"day\").hour(parseInt(splitted[0].split(\".\")[0])).format(\"YYYY-MM-DD HH:mm:ss\");\n                    finish = dayjs(_this.props.selectedDateSchedule.fullDate).startOf(\"day\").hour(parseInt(splitted[1].split(\".\")[0])).format(\"YYYY-MM-DD HH:mm:ss\");\n                    _iterator2 = _createForOfIteratorHelper(schedules);\n\n                    try {\n                      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                        schedule = _step2.value;\n\n                        if (dayjs(start).isSameOrAfter(dayjs(schedule.attributes.start), \"hour\") && dayjs(finish).isSameOrBefore(dayjs(schedule.attributes.finish), \"hour\")) {\n                          indexedStatusRentTime[duration] = \"booked\";\n                        }\n                      }\n                    } catch (err) {\n                      _iterator2.e(err);\n                    } finally {\n                      _iterator2.f();\n                    }\n                  }\n                } catch (err) {\n                  _iterator.e(err);\n                } finally {\n                  _iterator.f();\n                }\n\n                _this.setState({\n                  indexedStatusRentTime: indexedStatusRentTime\n                });\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSelectDuration\", function (e) {});\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChangeCalendar\", function (e) {\n      _this.props.selectDateSchedule({\n        fullDate: e,\n        dateStr: dayjs(e).format(\"YYYY-MM-DD HH:mm:ss\")\n      });\n\n      var opts = {\n        params: {\n          \"filter[start][date]\": dayjs(e).format(\"YYYY-MM-DD\"),\n          \"filter[product_id][is]\": _this.props.selectedProduct.id\n        }\n      };\n\n      _this.rebuildRentTime(opts);\n\n      _this.setState({\n        calendarValue: e\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSelectRentTime\", function (duration) {\n      return function (e) {\n        var indexedRentTime = _this.state.indexedRentTime;\n        var newIndexedRentTime = indexedRentTime;\n        newIndexedRentTime[duration].selected = !newIndexedRentTime[duration].selected;\n\n        if (newIndexedRentTime[duration].selected === true) {\n          _this.props.selectRentTime(duration);\n        } else {\n          _this.props.deselectRentTime(duration);\n        }\n\n        _this.setState({\n          indexedRentTime: newIndexedRentTime\n        });\n      };\n    });\n\n    return _this;\n  }\n\n  _createClass(BookPerDay, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var selectedDateSchedule, date, opts, indexedRentTime;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                // showLoadingSpinner();\n                selectedDateSchedule = this.props.selectedDateSchedule;\n                date = selectedDateSchedule && selectedDateSchedule.fullDate ? dayjs(selectedDateSchedule.fullDate).format(\"YYYY-MM-DD\") : dayjs().format(\"YYYY-MM-DD\");\n                opts = {\n                  params: {\n                    \"filter[start][date]\": date,\n                    \"filter[product_id][is]\": this.props.selectedProduct.id\n                  }\n                };\n                _context2.next = 5;\n                return this.rebuildRentTime(opts);\n\n              case 5:\n                indexedRentTime = listDurationTime.reduce(function (all, duration) {\n                  all[duration] = {\n                    selected: false\n                  };\n                  return all;\n                }, {});\n\n                if (selectedDateSchedule && selectedDateSchedule.fullDate) {\n                  this.setState({\n                    calendarValue: dayjs(selectedDateSchedule.fullDate).toDate()\n                  });\n                } else {\n                  this.setState({\n                    calendarValue: new Date()\n                  });\n                }\n\n                this.setState({\n                  indexedRentTime: indexedRentTime\n                }); // hideLoadingSpinner();\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          indexedRentTime = _this$state.indexedRentTime,\n          indexedStatusRentTime = _this$state.indexedStatusRentTime;\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          className: \"book-per-day\",\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            style: {\n              padding: \"0 3rem\"\n            },\n            children: /*#__PURE__*/_jsxDEV(Calendar, {\n              firstDayOfWeek: 2,\n              locale: \"en\",\n              prev2Label: null,\n              next2Label: null,\n              prevLabel: /*#__PURE__*/_jsxDEV(\"i\", {\n                color: \"#818181\",\n                className: \"fa fa-angle-left\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 26\n              }, this),\n              nextLabel: /*#__PURE__*/_jsxDEV(\"i\", {\n                color: \"#818181\",\n                className: \"fa fa-angle-right\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 26\n              }, this),\n              onChange: this.handleChangeCalendar,\n              value: this.state.calendarValue\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            lg: 6,\n            className: \"content-left\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              style: {\n                color: \"#3c3c3c\"\n              },\n              className: \"mt-4 mb-0\",\n              children: \"Pick Rent Time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pick-rent-container mt-4\",\n              children: /*#__PURE__*/_jsxDEV(Row, {\n                children: Object.keys(indexedRentTime).map(function (duration) {\n                  return indexedStatusRentTime[duration] ? /*#__PURE__*/_jsxDEV(Col, {\n                    lg: 6,\n                    className: \"mb-2\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"box-time \".concat(indexedStatusRentTime[duration]),\n                      children: /*#__PURE__*/_jsxDEV(\"span\", {\n                        style: {\n                          userSelect: \"none\"\n                        },\n                        children: duration\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 219,\n                        columnNumber: 25\n                      }, _this2)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 216,\n                      columnNumber: 23\n                    }, _this2)\n                  }, duration, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 215,\n                    columnNumber: 21\n                  }, _this2) : /*#__PURE__*/_jsxDEV(Col, {\n                    lg: 6,\n                    className: \"mb-2\",\n                    onClick: _this2.handleSelectRentTime(duration),\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        cursor: \"pointer\"\n                      },\n                      className: \"box-time \".concat(indexedStatusRentTime[duration], \" \").concat(indexedRentTime[duration] && indexedRentTime[duration].selected === true ? \"selected\" : \"\"),\n                      children: /*#__PURE__*/_jsxDEV(\"span\", {\n                        style: {\n                          userSelect: \"none\"\n                        },\n                        children: duration\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 240,\n                        columnNumber: 25\n                      }, _this2)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 229,\n                      columnNumber: 23\n                    }, _this2)\n                  }, duration, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 223,\n                    columnNumber: 21\n                  }, _this2);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 9\n        }, this)\n      }, void 0, false);\n    }\n  }]);\n\n  return BookPerDay;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  //   const { visible } = state.cart;\n  var selectedDateSchedule = state.productSchedule.selectedDateSchedule;\n  return {\n    // cartVisible: visible,\n    selectedDateSchedule: selectedDateSchedule\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    getProductSchedulesPerDay: function getProductSchedulesPerDay(opts) {\n      return dispatch(_getProductSchedulesPerDay(opts));\n    },\n    getProduct: function getProduct(payload) {\n      return dispatch(_getProduct(payload));\n    },\n    selectDateSchedule: function selectDateSchedule(payload) {\n      return dispatch(_selectDateSchedule(payload));\n    },\n    selectRentTime: function selectRentTime(payload) {\n      return dispatch(_selectRentTime(payload));\n    },\n    deselectRentTime: function deselectRentTime(payload) {\n      return dispatch(_deselectRentTime(payload));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BookPerDay);","map":{"version":3,"sources":["/home/arifin/Documents/pretest/dashboard/src/components/BookPerDay.js"],"names":["React","Component","Row","Col","Card","Form","InputGroup","FormControl","Button","Table","PropTypes","connect","formatCurrency","SelectDuration","Calendar","dayjs","isSameOrAfter","require","isSameOrBefore","extend","getProduct","getProductSchedulesPerDay","selectDateSchedule","selectRentTime","deselectRentTime","listDurationTime","BookPerDay","calendarValue","Date","indexedRentTime","indexedStatusRentTime","opts","props","schedules","duration","splitted","split","start","selectedDateSchedule","fullDate","startOf","hour","parseInt","format","finish","schedule","attributes","setState","e","dateStr","params","selectedProduct","id","rebuildRentTime","state","newIndexedRentTime","selected","date","reduce","all","toDate","padding","handleChangeCalendar","color","Object","keys","map","userSelect","handleSelectRentTime","cursor","mapStateToProps","productSchedule","mapDispatchToProps","dispatch","payload"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  Row,\n  Col,\n  Card,\n  Form,\n  InputGroup,\n  FormControl,\n  Button,\n  Table,\n} from \"react-bootstrap\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { formatCurrency } from \"libs/numbers\";\nimport SelectDuration from \"components/SelectDuration\";\nimport Calendar from \"react-calendar\";\nimport dayjs from \"dayjs\";\nconst isSameOrAfter = require(\"dayjs/plugin/isSameOrAfter\");\nconst isSameOrBefore = require(\"dayjs/plugin/isSameOrBefore\");\ndayjs.extend(isSameOrAfter);\ndayjs.extend(isSameOrBefore);\n\nimport { getProduct } from \"redux/actions/product\";\nimport {\n  getProductSchedulesPerDay,\n  selectDateSchedule,\n  selectRentTime,\n  deselectRentTime,\n} from \"redux/actions/product_schedule\";\n// import { showLoadingSpinner, hideLoadingSpinner } from \"./Layout\";\n\nconst listDurationTime = [\n  // Pagi\n  \"01.00 - 02.00\",\n  \"02.00 - 03.00\",\n  \"03.00 - 04.00\",\n  \"04.00 - 05.00\",\n  \"05.00 - 06.00\",\n  \"06.00 - 07.00\",\n  \"07.00 - 08.00\",\n  \"08.00 - 09.00\",\n  \"09.00 - 10.00\",\n  \"10.00 - 11.00\",\n  \"11.00 - 12.00\",\n  // Siang - Sore\n  \"12.00 - 13.00\",\n  \"13.00 - 14.00\",\n  \"14.00 - 15.00\",\n  \"15.00 - 16.00\",\n  \"16.00 - 17.00\",\n  // Malam\n  \"17.00 - 18.00\",\n  \"18.00 - 19.00\",\n  \"19.00 - 20.00\",\n  \"20.00 - 21.00\",\n  \"21.00 - 22.00\",\n  \"22.00 - 23.00\",\n  \"23.00 - 24.00\",\n];\n\nclass BookPerDay extends Component {\n  state = {\n    // defaultViewListText: \"60 Minutes\",\n    // viewList: [\n    //   { id: \"30\", name: \"30 Minutes\" },\n    //   { id: \"60\", name: \"60 Minutes\" },\n    //   { id: \"90\", name: \"90 Minutes\" },\n    //   { id: \"120\", name: \"120 Minutes\" },\n    // ],\n    calendarValue: new Date(),\n    indexedRentTime: {},\n    indexedStatusRentTime: {},\n  };\n  async componentDidMount() {\n    // showLoadingSpinner();\n    const {\n      selectedDateSchedule,\n    } = this.props;\n    const date =\n      selectedDateSchedule && selectedDateSchedule.fullDate\n        ? dayjs(selectedDateSchedule.fullDate).format(\"YYYY-MM-DD\")\n        : dayjs().format(\"YYYY-MM-DD\");\n    const opts = {\n      params: {\n        \"filter[start][date]\": date,\n        \"filter[product_id][is]\": this.props.selectedProduct.id,\n      },\n    };\n    await this.rebuildRentTime(opts);\n    const indexedRentTime = listDurationTime.reduce((all, duration) => {\n      all[duration] = {\n        selected: false,\n      };\n      return all;\n    }, {});\n    if (selectedDateSchedule && selectedDateSchedule.fullDate) {\n      this.setState({\n        calendarValue: dayjs(selectedDateSchedule.fullDate).toDate(),\n      });\n    } else {\n      this.setState({\n        calendarValue: new Date(),\n      });\n    }\n    this.setState({\n      indexedRentTime,\n    });\n    // hideLoadingSpinner();\n  }\n  rebuildRentTime = async (opts) => {\n    const schedules = await this.props.getProductSchedulesPerDay(opts);\n    const indexedStatusRentTime = {};\n    for (const duration of listDurationTime) {\n      const splitted = duration.split(\" - \");\n      const start = dayjs(this.props.selectedDateSchedule.fullDate)\n        .startOf(\"day\")\n        .hour(parseInt(splitted[0].split(\".\")[0]))\n        .format(\"YYYY-MM-DD HH:mm:ss\");\n      const finish = dayjs(this.props.selectedDateSchedule.fullDate)\n        .startOf(\"day\")\n        .hour(parseInt(splitted[1].split(\".\")[0]))\n        .format(\"YYYY-MM-DD HH:mm:ss\");\n      for (const schedule of schedules) {\n        if (\n          dayjs(start).isSameOrAfter(\n            dayjs(schedule.attributes.start),\n            \"hour\"\n          ) &&\n          dayjs(finish).isSameOrBefore(\n            dayjs(schedule.attributes.finish),\n            \"hour\"\n          )\n        ) {\n          indexedStatusRentTime[duration] = \"booked\";\n        }\n      }\n    }\n    this.setState({\n      indexedStatusRentTime,\n    });\n  };\n  handleSelectDuration = (e) => {};\n  handleChangeCalendar = (e) => {\n    this.props.selectDateSchedule({\n      fullDate: e,\n      dateStr: dayjs(e).format(\"YYYY-MM-DD HH:mm:ss\"),\n    });\n    const opts = {\n      params: {\n        \"filter[start][date]\": dayjs(e).format(\"YYYY-MM-DD\"),\n        \"filter[product_id][is]\": this.props.selectedProduct.id,\n      },\n    };\n    this.rebuildRentTime(opts);\n    this.setState({\n      calendarValue: e,\n    });\n  };\n  handleSelectRentTime = (duration) => (e) => {\n    const { indexedRentTime } = this.state;\n    let newIndexedRentTime = indexedRentTime;\n    newIndexedRentTime[duration].selected = !newIndexedRentTime[duration]\n      .selected;\n    if (newIndexedRentTime[duration].selected === true) {\n      this.props.selectRentTime(duration);\n    } else {\n      this.props.deselectRentTime(duration);\n    }\n    this.setState({\n      indexedRentTime: newIndexedRentTime,\n    });\n  };\n  render() {\n    const { indexedRentTime, indexedStatusRentTime } = this.state;\n    return (\n      <>\n        <Row className=\"book-per-day\">\n          <Col style={{ padding: \"0 3rem\" }}>\n            <Calendar\n              firstDayOfWeek={2}\n              locale={\"en\"}\n              prev2Label={null}\n              next2Label={null}\n              prevLabel={<i color=\"#818181\" className=\"fa fa-angle-left\" />}\n              nextLabel={<i color=\"#818181\" className=\"fa fa-angle-right\" />}\n              onChange={this.handleChangeCalendar}\n              value={this.state.calendarValue}\n            />\n          </Col>\n          <Col lg={6} className=\"content-left\">\n            {/* <h5 style={{ color: \"#3c3c3c\" }}>Duration</h5>\n            <p\n              style={{\n                fontSize: \"0.9rem\",\n                color: \"#78828A\",\n              }}\n            >\n              Select how long you would like to rent the space. Minimum of 30\n              minutes.\n            </p>\n            <div className=\"form-group mt-4\">\n              <SelectDuration\n                defaultText={this.state.defaultViewListText}\n                optionsList={this.state.viewList}\n                onChange={this.handleSelectDuration}\n              />\n            </div> */}\n            <h5 style={{ color: \"#3c3c3c\" }} className=\"mt-4 mb-0\">\n              Pick Rent Time\n            </h5>\n            <div className=\"pick-rent-container mt-4\">\n              <Row>\n                {Object.keys(indexedRentTime).map((duration) =>\n                  indexedStatusRentTime[duration] ? (\n                    <Col lg={6} className=\"mb-2\" key={duration}>\n                      <div\n                        className={`box-time ${indexedStatusRentTime[duration]}`}\n                      >\n                        <span style={{ userSelect: \"none\" }}>{duration}</span>\n                      </div>\n                    </Col>\n                  ) : (\n                    <Col\n                      lg={6}\n                      className=\"mb-2\"\n                      key={duration}\n                      onClick={this.handleSelectRentTime(duration)}\n                    >\n                      <div\n                        style={{ cursor: \"pointer\" }}\n                        className={`box-time ${\n                          indexedStatusRentTime[duration]\n                        } ${\n                          indexedRentTime[duration] &&\n                          indexedRentTime[duration].selected === true\n                            ? \"selected\"\n                            : \"\"\n                        }`}\n                      >\n                        <span style={{ userSelect: \"none\" }}>{duration}</span>\n                      </div>\n                    </Col>\n                  )\n                )}\n              </Row>\n            </div>\n          </Col>\n        </Row>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n//   const { visible } = state.cart;\n  const { selectedDateSchedule } = state.productSchedule;\n  return {\n    // cartVisible: visible,\n    selectedDateSchedule,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    getProductSchedulesPerDay: (opts) =>\n    dispatch(getProductSchedulesPerDay(opts)),\n    getProduct: (payload) => dispatch(getProduct(payload)),\n    selectDateSchedule: (payload) => dispatch(selectDateSchedule(payload)),\n    selectRentTime: (payload) => dispatch(selectRentTime(payload)),\n    deselectRentTime: (payload) => dispatch(deselectRentTime(payload)),\n  };\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(BookPerDay);\n"]},"metadata":{},"sourceType":"module"}