{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/arifin/Documents/pretest/dashboard/src/components/BookPerDay.js\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from \"react\";\nimport { Row, Col, Card, Form, InputGroup, FormControl, Button, Table } from \"react-bootstrap\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { formatCurrency } from \"libs/numbers\";\nimport SelectDuration from \"components/SelectDuration\";\nimport Calendar from \"react-calendar\";\nimport dayjs from \"dayjs\";\n\nconst isSameOrAfter = require(\"dayjs/plugin/isSameOrAfter\");\n\nconst isSameOrBefore = require(\"dayjs/plugin/isSameOrBefore\");\n\ndayjs.extend(isSameOrAfter);\ndayjs.extend(isSameOrBefore);\nimport { getProduct } from \"redux/actions/product\";\nimport { getProductSchedulesPerDay, selectDateSchedule, selectRentTime, deselectRentTime } from \"redux/actions/product_schedule\"; // import { showLoadingSpinner, hideLoadingSpinner } from \"./Layout\";\n\nconst listDurationTime = [// Pagi\n\"01.00 - 02.00\", \"02.00 - 03.00\", \"03.00 - 04.00\", \"04.00 - 05.00\", \"05.00 - 06.00\", \"06.00 - 07.00\", \"07.00 - 08.00\", \"08.00 - 09.00\", \"09.00 - 10.00\", \"10.00 - 11.00\", \"11.00 - 12.00\", // Siang - Sore\n\"12.00 - 13.00\", \"13.00 - 14.00\", \"14.00 - 15.00\", \"15.00 - 16.00\", \"16.00 - 17.00\", // Malam\n\"17.00 - 18.00\", \"18.00 - 19.00\", \"19.00 - 20.00\", \"20.00 - 21.00\", \"21.00 - 22.00\", \"22.00 - 23.00\", \"23.00 - 24.00\"];\n\nclass BookPerDay extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      // defaultViewListText: \"60 Minutes\",\n      // viewList: [\n      //   { id: \"30\", name: \"30 Minutes\" },\n      //   { id: \"60\", name: \"60 Minutes\" },\n      //   { id: \"90\", name: \"90 Minutes\" },\n      //   { id: \"120\", name: \"120 Minutes\" },\n      // ],\n      calendarValue: new Date(),\n      indexedRentTime: {},\n      indexedStatusRentTime: {}\n    });\n\n    _defineProperty(this, \"rebuildRentTime\", async opts => {\n      const schedules = await this.props.getProductSchedulesPerDay(opts);\n      const indexedStatusRentTime = {};\n\n      for (const duration of listDurationTime) {\n        const splitted = duration.split(\" - \");\n        const start = dayjs(this.props.selectedDateSchedule.fullDate).startOf(\"day\").hour(parseInt(splitted[0].split(\".\")[0])).format(\"YYYY-MM-DD HH:mm:ss\");\n        const finish = dayjs(this.props.selectedDateSchedule.fullDate).startOf(\"day\").hour(parseInt(splitted[1].split(\".\")[0])).format(\"YYYY-MM-DD HH:mm:ss\");\n\n        for (const schedule of schedules) {\n          if (dayjs(start).isSameOrAfter(dayjs(schedule.attributes.start), \"hour\") && dayjs(finish).isSameOrBefore(dayjs(schedule.attributes.finish), \"hour\")) {\n            indexedStatusRentTime[duration] = \"booked\";\n          }\n        }\n      }\n\n      this.setState({\n        indexedStatusRentTime\n      });\n    });\n\n    _defineProperty(this, \"handleSelectDuration\", e => {});\n\n    _defineProperty(this, \"handleChangeCalendar\", e => {\n      this.props.selectDateSchedule({\n        fullDate: e,\n        dateStr: dayjs(e).format(\"YYYY-MM-DD HH:mm:ss\")\n      });\n      const opts = {\n        params: {\n          \"filter[start][date]\": dayjs(e).format(\"YYYY-MM-DD\"),\n          \"filter[product_id][is]\": this.props.selectedProduct.id\n        }\n      };\n      this.rebuildRentTime(opts);\n      this.setState({\n        calendarValue: e\n      });\n    });\n\n    _defineProperty(this, \"handleSelectRentTime\", duration => e => {\n      const {\n        indexedRentTime\n      } = this.state;\n      let newIndexedRentTime = indexedRentTime;\n      newIndexedRentTime[duration].selected = !newIndexedRentTime[duration].selected;\n\n      if (newIndexedRentTime[duration].selected === true) {\n        this.props.selectRentTime(duration);\n      } else {\n        this.props.deselectRentTime(duration);\n      }\n\n      this.setState({\n        indexedRentTime: newIndexedRentTime\n      });\n    });\n  }\n\n  async componentDidMount() {\n    // showLoadingSpinner();\n    const {\n      selectedDateSchedule\n    } = this.props;\n    const date = selectedDateSchedule && selectedDateSchedule.fullDate ? dayjs(selectedDateSchedule.fullDate).format(\"YYYY-MM-DD\") : dayjs().format(\"YYYY-MM-DD\");\n    const opts = {\n      params: {\n        \"filter[start][date]\": date,\n        \"filter[product_id][is]\": this.props.selectedProduct.id\n      }\n    };\n    await this.rebuildRentTime(opts);\n    const indexedRentTime = listDurationTime.reduce((all, duration) => {\n      all[duration] = {\n        selected: false\n      };\n      return all;\n    }, {});\n\n    if (selectedDateSchedule && selectedDateSchedule.fullDate) {\n      this.setState({\n        calendarValue: dayjs(selectedDateSchedule.fullDate).toDate()\n      });\n    } else {\n      this.setState({\n        calendarValue: new Date()\n      });\n    }\n\n    this.setState({\n      indexedRentTime\n    }); // hideLoadingSpinner();\n  }\n\n  render() {\n    const {\n      indexedRentTime,\n      indexedStatusRentTime\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        className: \"book-per-day\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          style: {\n            padding: \"0 3rem\"\n          },\n          children: /*#__PURE__*/_jsxDEV(Calendar, {\n            firstDayOfWeek: 2,\n            locale: \"en\",\n            prev2Label: null,\n            next2Label: null,\n            prevLabel: /*#__PURE__*/_jsxDEV(\"i\", {\n              color: \"#818181\",\n              className: \"fa fa-angle-left\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 26\n            }, this),\n            nextLabel: /*#__PURE__*/_jsxDEV(\"i\", {\n              color: \"#818181\",\n              className: \"fa fa-angle-right\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 26\n            }, this),\n            onChange: this.handleChangeCalendar,\n            value: this.state.calendarValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          lg: 6,\n          className: \"content-left\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            style: {\n              color: \"#3c3c3c\"\n            },\n            className: \"mt-4 mb-0\",\n            children: \"Pick Rent Time\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pick-rent-container mt-4\",\n            children: /*#__PURE__*/_jsxDEV(Row, {\n              children: Object.keys(indexedRentTime).map(duration => indexedStatusRentTime[duration] ? /*#__PURE__*/_jsxDEV(Col, {\n                lg: 6,\n                className: \"mb-2\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `box-time ${indexedStatusRentTime[duration]}`,\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      userSelect: \"none\"\n                    },\n                    children: duration\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 219,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 216,\n                  columnNumber: 23\n                }, this)\n              }, duration, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(Col, {\n                lg: 6,\n                className: \"mb-2\",\n                onClick: this.handleSelectRentTime(duration),\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    cursor: \"pointer\"\n                  },\n                  className: `box-time ${indexedStatusRentTime[duration]} ${indexedRentTime[duration] && indexedRentTime[duration].selected === true ? \"selected\" : \"\"}`,\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      userSelect: \"none\"\n                    },\n                    children: duration\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 240,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 23\n                }, this)\n              }, duration, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  //   const { visible } = state.cart;\n  const {\n    selectedDateSchedule\n  } = state.productSchedule;\n  return {\n    // cartVisible: visible,\n    selectedDateSchedule\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getProductSchedulesPerDay: opts => dispatch(getProductSchedulesPerDay(opts)),\n    getProduct: payload => dispatch(getProduct(payload)),\n    selectDateSchedule: payload => dispatch(selectDateSchedule(payload)),\n    selectRentTime: payload => dispatch(selectRentTime(payload)),\n    deselectRentTime: payload => dispatch(deselectRentTime(payload))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BookPerDay);","map":{"version":3,"sources":["/home/arifin/Documents/pretest/dashboard/src/components/BookPerDay.js"],"names":["React","Component","Row","Col","Card","Form","InputGroup","FormControl","Button","Table","PropTypes","connect","formatCurrency","SelectDuration","Calendar","dayjs","isSameOrAfter","require","isSameOrBefore","extend","getProduct","getProductSchedulesPerDay","selectDateSchedule","selectRentTime","deselectRentTime","listDurationTime","BookPerDay","calendarValue","Date","indexedRentTime","indexedStatusRentTime","opts","schedules","props","duration","splitted","split","start","selectedDateSchedule","fullDate","startOf","hour","parseInt","format","finish","schedule","attributes","setState","e","dateStr","params","selectedProduct","id","rebuildRentTime","state","newIndexedRentTime","selected","componentDidMount","date","reduce","all","toDate","render","padding","handleChangeCalendar","color","Object","keys","map","userSelect","handleSelectRentTime","cursor","mapStateToProps","productSchedule","mapDispatchToProps","dispatch","payload"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  Row,\n  Col,\n  Card,\n  Form,\n  InputGroup,\n  FormControl,\n  Button,\n  Table,\n} from \"react-bootstrap\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { formatCurrency } from \"libs/numbers\";\nimport SelectDuration from \"components/SelectDuration\";\nimport Calendar from \"react-calendar\";\nimport dayjs from \"dayjs\";\nconst isSameOrAfter = require(\"dayjs/plugin/isSameOrAfter\");\nconst isSameOrBefore = require(\"dayjs/plugin/isSameOrBefore\");\ndayjs.extend(isSameOrAfter);\ndayjs.extend(isSameOrBefore);\n\nimport { getProduct } from \"redux/actions/product\";\nimport {\n  getProductSchedulesPerDay,\n  selectDateSchedule,\n  selectRentTime,\n  deselectRentTime,\n} from \"redux/actions/product_schedule\";\n// import { showLoadingSpinner, hideLoadingSpinner } from \"./Layout\";\n\nconst listDurationTime = [\n  // Pagi\n  \"01.00 - 02.00\",\n  \"02.00 - 03.00\",\n  \"03.00 - 04.00\",\n  \"04.00 - 05.00\",\n  \"05.00 - 06.00\",\n  \"06.00 - 07.00\",\n  \"07.00 - 08.00\",\n  \"08.00 - 09.00\",\n  \"09.00 - 10.00\",\n  \"10.00 - 11.00\",\n  \"11.00 - 12.00\",\n  // Siang - Sore\n  \"12.00 - 13.00\",\n  \"13.00 - 14.00\",\n  \"14.00 - 15.00\",\n  \"15.00 - 16.00\",\n  \"16.00 - 17.00\",\n  // Malam\n  \"17.00 - 18.00\",\n  \"18.00 - 19.00\",\n  \"19.00 - 20.00\",\n  \"20.00 - 21.00\",\n  \"21.00 - 22.00\",\n  \"22.00 - 23.00\",\n  \"23.00 - 24.00\",\n];\n\nclass BookPerDay extends Component {\n  state = {\n    // defaultViewListText: \"60 Minutes\",\n    // viewList: [\n    //   { id: \"30\", name: \"30 Minutes\" },\n    //   { id: \"60\", name: \"60 Minutes\" },\n    //   { id: \"90\", name: \"90 Minutes\" },\n    //   { id: \"120\", name: \"120 Minutes\" },\n    // ],\n    calendarValue: new Date(),\n    indexedRentTime: {},\n    indexedStatusRentTime: {},\n  };\n  async componentDidMount() {\n    // showLoadingSpinner();\n    const {\n      selectedDateSchedule,\n    } = this.props;\n    const date =\n      selectedDateSchedule && selectedDateSchedule.fullDate\n        ? dayjs(selectedDateSchedule.fullDate).format(\"YYYY-MM-DD\")\n        : dayjs().format(\"YYYY-MM-DD\");\n    const opts = {\n      params: {\n        \"filter[start][date]\": date,\n        \"filter[product_id][is]\": this.props.selectedProduct.id,\n      },\n    };\n    await this.rebuildRentTime(opts);\n    const indexedRentTime = listDurationTime.reduce((all, duration) => {\n      all[duration] = {\n        selected: false,\n      };\n      return all;\n    }, {});\n    if (selectedDateSchedule && selectedDateSchedule.fullDate) {\n      this.setState({\n        calendarValue: dayjs(selectedDateSchedule.fullDate).toDate(),\n      });\n    } else {\n      this.setState({\n        calendarValue: new Date(),\n      });\n    }\n    this.setState({\n      indexedRentTime,\n    });\n    // hideLoadingSpinner();\n  }\n  rebuildRentTime = async (opts) => {\n    const schedules = await this.props.getProductSchedulesPerDay(opts);\n    const indexedStatusRentTime = {};\n    for (const duration of listDurationTime) {\n      const splitted = duration.split(\" - \");\n      const start = dayjs(this.props.selectedDateSchedule.fullDate)\n        .startOf(\"day\")\n        .hour(parseInt(splitted[0].split(\".\")[0]))\n        .format(\"YYYY-MM-DD HH:mm:ss\");\n      const finish = dayjs(this.props.selectedDateSchedule.fullDate)\n        .startOf(\"day\")\n        .hour(parseInt(splitted[1].split(\".\")[0]))\n        .format(\"YYYY-MM-DD HH:mm:ss\");\n      for (const schedule of schedules) {\n        if (\n          dayjs(start).isSameOrAfter(\n            dayjs(schedule.attributes.start),\n            \"hour\"\n          ) &&\n          dayjs(finish).isSameOrBefore(\n            dayjs(schedule.attributes.finish),\n            \"hour\"\n          )\n        ) {\n          indexedStatusRentTime[duration] = \"booked\";\n        }\n      }\n    }\n    this.setState({\n      indexedStatusRentTime,\n    });\n  };\n  handleSelectDuration = (e) => {};\n  handleChangeCalendar = (e) => {\n    this.props.selectDateSchedule({\n      fullDate: e,\n      dateStr: dayjs(e).format(\"YYYY-MM-DD HH:mm:ss\"),\n    });\n    const opts = {\n      params: {\n        \"filter[start][date]\": dayjs(e).format(\"YYYY-MM-DD\"),\n        \"filter[product_id][is]\": this.props.selectedProduct.id,\n      },\n    };\n    this.rebuildRentTime(opts);\n    this.setState({\n      calendarValue: e,\n    });\n  };\n  handleSelectRentTime = (duration) => (e) => {\n    const { indexedRentTime } = this.state;\n    let newIndexedRentTime = indexedRentTime;\n    newIndexedRentTime[duration].selected = !newIndexedRentTime[duration]\n      .selected;\n    if (newIndexedRentTime[duration].selected === true) {\n      this.props.selectRentTime(duration);\n    } else {\n      this.props.deselectRentTime(duration);\n    }\n    this.setState({\n      indexedRentTime: newIndexedRentTime,\n    });\n  };\n  render() {\n    const { indexedRentTime, indexedStatusRentTime } = this.state;\n    return (\n      <>\n        <Row className=\"book-per-day\">\n          <Col style={{ padding: \"0 3rem\" }}>\n            <Calendar\n              firstDayOfWeek={2}\n              locale={\"en\"}\n              prev2Label={null}\n              next2Label={null}\n              prevLabel={<i color=\"#818181\" className=\"fa fa-angle-left\" />}\n              nextLabel={<i color=\"#818181\" className=\"fa fa-angle-right\" />}\n              onChange={this.handleChangeCalendar}\n              value={this.state.calendarValue}\n            />\n          </Col>\n          <Col lg={6} className=\"content-left\">\n            {/* <h5 style={{ color: \"#3c3c3c\" }}>Duration</h5>\n            <p\n              style={{\n                fontSize: \"0.9rem\",\n                color: \"#78828A\",\n              }}\n            >\n              Select how long you would like to rent the space. Minimum of 30\n              minutes.\n            </p>\n            <div className=\"form-group mt-4\">\n              <SelectDuration\n                defaultText={this.state.defaultViewListText}\n                optionsList={this.state.viewList}\n                onChange={this.handleSelectDuration}\n              />\n            </div> */}\n            <h5 style={{ color: \"#3c3c3c\" }} className=\"mt-4 mb-0\">\n              Pick Rent Time\n            </h5>\n            <div className=\"pick-rent-container mt-4\">\n              <Row>\n                {Object.keys(indexedRentTime).map((duration) =>\n                  indexedStatusRentTime[duration] ? (\n                    <Col lg={6} className=\"mb-2\" key={duration}>\n                      <div\n                        className={`box-time ${indexedStatusRentTime[duration]}`}\n                      >\n                        <span style={{ userSelect: \"none\" }}>{duration}</span>\n                      </div>\n                    </Col>\n                  ) : (\n                    <Col\n                      lg={6}\n                      className=\"mb-2\"\n                      key={duration}\n                      onClick={this.handleSelectRentTime(duration)}\n                    >\n                      <div\n                        style={{ cursor: \"pointer\" }}\n                        className={`box-time ${\n                          indexedStatusRentTime[duration]\n                        } ${\n                          indexedRentTime[duration] &&\n                          indexedRentTime[duration].selected === true\n                            ? \"selected\"\n                            : \"\"\n                        }`}\n                      >\n                        <span style={{ userSelect: \"none\" }}>{duration}</span>\n                      </div>\n                    </Col>\n                  )\n                )}\n              </Row>\n            </div>\n          </Col>\n        </Row>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n//   const { visible } = state.cart;\n  const { selectedDateSchedule } = state.productSchedule;\n  return {\n    // cartVisible: visible,\n    selectedDateSchedule,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    getProductSchedulesPerDay: (opts) =>\n    dispatch(getProductSchedulesPerDay(opts)),\n    getProduct: (payload) => dispatch(getProduct(payload)),\n    selectDateSchedule: (payload) => dispatch(selectDateSchedule(payload)),\n    selectRentTime: (payload) => dispatch(selectRentTime(payload)),\n    deselectRentTime: (payload) => dispatch(deselectRentTime(payload)),\n  };\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(BookPerDay);\n"]},"metadata":{},"sourceType":"module"}