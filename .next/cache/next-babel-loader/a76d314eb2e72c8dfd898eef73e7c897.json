{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/arifin/Documents/semanggi/semanggi-bo/src/pages/customer/master-data.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport * as React from \"react\";\nimport { Card, Col, Row, Modal, Button } from \"react-bootstrap\";\nimport Layout, { addNotification } from \"../../components/Layout\";\nimport DataTable2 from \"../../components/DataTable2\";\nimport { Tab, Tabs, TabList, TabPanel } from \"react-tabs\";\nimport { getUsers as _getUsers, assignCompanyToReseller as _assignCompanyToReseller } from \"../../redux/actions/user\";\nimport { connect } from \"react-redux\";\n\nvar MasterData = /*#__PURE__*/function (_React$Component) {\n  _inherits(MasterData, _React$Component);\n\n  var _super = _createSuper(MasterData);\n\n  function MasterData(_props) {\n    var _this;\n\n    _classCallCheck(this, MasterData);\n\n    _this = _super.call(this, _props);\n\n    _defineProperty(_assertThisInitialized(_this), \"TABS\", [{\n      label: \"Company\"\n    }, {\n      label: \"Personal\"\n    }]);\n\n    _defineProperty(_assertThisInitialized(_this), \"companyColumns\", [{\n      Header: \"Company Name\",\n      accessor: \"attributes.business_name\"\n    }, {\n      Header: \"Email\",\n      accessor: \"attributes.email\"\n    }, {\n      Header: \"Action\",\n      accessor: \"\",\n      Cell: function Cell(props) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"mr-2\",\n            style: {\n              width: \"15px\",\n              cursor: \"pointer\"\n            },\n            src: \"https://storage.googleapis.com/spaces-semanggi-app/back-office/super-entity/png/border-color-24px.png\",\n            onClick: function onClick() {\n              return _this.setState({\n                modal: true,\n                userId: props.cell.row.original.attributes.id\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 11\n          }, _assertThisInitialized(_this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 9\n        }, _assertThisInitialized(_this));\n      }\n    }]);\n\n    _defineProperty(_assertThisInitialized(_this), \"columns\", [{\n      Header: \"Full Name\",\n      accessor: \"attributes.full_name\"\n    }, {\n      Header: \"User Name\",\n      accessor: \"attributes.username\"\n    }, {\n      Header: \"Email\",\n      accessor: \"attributes.email\"\n    }, {\n      Header: \"Action\",\n      accessor: \"\",\n      Cell: function Cell(props) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"mr-2\",\n            style: {\n              width: \"15px\",\n              cursor: \"pointer\"\n            },\n            src: \"https://storage.googleapis.com/spaces-semanggi-app/back-office/super-entity/png/border-color-24px.png\" // onClick={() =>\n            //   this.openEditBillingInvoiceModal(props.cell.row.original)\n            // }\n\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 11\n          }, _assertThisInitialized(_this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 9\n        }, _assertThisInitialized(_this));\n      }\n    }]);\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSelectTab\", function (index) {\n      var label = _this.TABS[index].label;\n\n      _this.setState({\n        tab: label\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleAssignCompanyToReseller\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _this.props.assignCompanyToReseller(_this.state.userId, {}, {});\n\n            case 2:\n              response = _context.sent;\n              _context.next = 5;\n              return _this.props.getUsers(_this.state.getUserOpts);\n\n            case 5:\n              _this.setState({\n                userId: null,\n                modal: false\n              });\n\n              addNotification({\n                level: \"success\",\n                message: \"Success assigned company to reseller!\"\n              }); // }\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n\n    _this.state = {\n      getUserOpts: {\n        params: {\n          \"page[limit]\": 100,\n          \"filter[roles.custom_name][not_in]\": \"super_enterprise,super_admin,enterprise\"\n        }\n      },\n      tab: \"Company\",\n      modal: false,\n      userId: null\n    };\n    return _this;\n  }\n\n  _createClass(MasterData, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.props.getUsers(this.state.getUserOpts);\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var tabIndex = 0;\n\n      if (this.state.tab) {\n        var selectedTab = this.TABS.findIndex(function (tab) {\n          return tab.label === _this2.state.tab;\n        });\n\n        if (selectedTab >= 0) {\n          tabIndex = selectedTab;\n        }\n      }\n\n      return /*#__PURE__*/_jsxDEV(Layout, {\n        title: \"Master Data\",\n        classname: \"dashboard theme-light\",\n        children: [/*#__PURE__*/_jsxDEV(Modal, {\n          show: this.state.modal,\n          onHide: function onHide() {\n            return _this2.setState({\n              modal: false\n            });\n          },\n          dialogClassName: \"modal-90w\",\n          \"aria-labelledby\": \"example-custom-modal-styling-title\",\n          centered: true,\n          backdrop: \"static\",\n          \"class\": \"modal-backdrop foo-modal-backdrop in\",\n          keyboard: false,\n          children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n            closeButton: true,\n            children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n              children: \"Assign Company As Reseller\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-center\",\n              children: \"Are you sure you want to make this company as a reseller?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"secondary\",\n              onClick: function onClick() {\n                return _this2.setState({\n                  modal: false\n                });\n              },\n              children: \"Close\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              onClick: this.handleAssignCompanyToReseller,\n              children: \"Save\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          children: /*#__PURE__*/_jsxDEV(Col, {\n            lg: 12,\n            md: 12,\n            sm: 12,\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              style: {\n                backgroundColor: \"white\",\n                borderRadius: \"10px\"\n              },\n              children: /*#__PURE__*/_jsxDEV(Row, {\n                className: \"position-relative show-grid\",\n                style: {\n                  margin: \"20px 20px 0px 20px\"\n                },\n                children: /*#__PURE__*/_jsxDEV(Col, {\n                  xs: 12,\n                  children: /*#__PURE__*/_jsxDEV(Row, {\n                    className: \"position-relative show-grid\",\n                    style: {\n                      margin: \"40px 20px 0px 20px\"\n                    },\n                    children: /*#__PURE__*/_jsxDEV(Col, {\n                      xs: 12,\n                      children: /*#__PURE__*/_jsxDEV(Tabs, {\n                        onSelect: this.handleSelectTab,\n                        selectedIndex: tabIndex,\n                        children: [/*#__PURE__*/_jsxDEV(TabList, {\n                          children: this.TABS.map(function (tab) {\n                            return /*#__PURE__*/_jsxDEV(Tab, {\n                              children: tab.label\n                            }, tab.label, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 188,\n                              columnNumber: 29\n                            }, _this2);\n                          })\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 186,\n                          columnNumber: 25\n                        }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n                          className: \"mt-5\",\n                          children: /*#__PURE__*/_jsxDEV(DataTable2, {\n                            data: this.props.companyData,\n                            columns: this.companyColumns,\n                            hideHeader: true\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 193,\n                            columnNumber: 27\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 192,\n                          columnNumber: 25\n                        }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n                          children: /*#__PURE__*/_jsxDEV(DataTable2, {\n                            data: this.props.userData,\n                            columns: this.columns,\n                            hideHeader: true\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 200,\n                            columnNumber: 27\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 199,\n                          columnNumber: 25\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 182,\n                        columnNumber: 23\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 181,\n                      columnNumber: 21\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 177,\n                    columnNumber: 19\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 176,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return MasterData;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  var companyData = state.company.companies;\n  var companyIncludeData = state.company.include;\n  var companyTotalData = state.company.total;\n  var userData = state.user.data;\n  var userIncludeData = state.user.include;\n  var userTotalData = state.user.total;\n  return {\n    companyData: companyData,\n    companyIncludeData: companyIncludeData,\n    companyTotalData: companyTotalData,\n    userData: userData,\n    userIncludeData: userIncludeData,\n    userTotalData: userTotalData\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    getUsers: function getUsers(opts) {\n      return dispatch(_getUsers(opts));\n    },\n    assignCompanyToReseller: function assignCompanyToReseller(id, payload, opts) {\n      return dispatch(_assignCompanyToReseller(id, payload, opts));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MasterData);","map":{"version":3,"sources":["/home/arifin/Documents/semanggi/semanggi-bo/src/pages/customer/master-data.js"],"names":["React","Card","Col","Row","Modal","Button","Layout","addNotification","DataTable2","Tab","Tabs","TabList","TabPanel","getUsers","assignCompanyToReseller","connect","MasterData","props","label","Header","accessor","Cell","width","cursor","setState","modal","userId","cell","row","original","attributes","id","index","TABS","tab","state","response","getUserOpts","level","message","params","tabIndex","selectedTab","findIndex","handleAssignCompanyToReseller","backgroundColor","borderRadius","margin","handleSelectTab","map","companyData","companyColumns","userData","columns","Component","mapStateToProps","company","companies","companyIncludeData","include","companyTotalData","total","user","data","userIncludeData","userTotalData","mapDispatchToProps","dispatch","opts","payload"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { Card, Col, Row, Modal, Button } from \"react-bootstrap\";\nimport Layout, {\n  addNotification,\n} from \"../../components/Layout\";\nimport DataTable2 from \"../../components/DataTable2\";\nimport { Tab, Tabs, TabList, TabPanel } from \"react-tabs\";\nimport { getUsers, assignCompanyToReseller } from \"../../redux/actions/user\";\nimport { connect } from \"react-redux\";\n\nclass MasterData extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      getUserOpts: {\n        params: {\n          \"page[limit]\": 100,\n          \"filter[roles.custom_name][not_in]\":\n            \"super_enterprise,super_admin,enterprise\",\n        },\n      },\n      tab: \"Company\",\n      modal: false,\n      userId: null\n    };\n  }\n\n  TABS = [\n    {\n      label: \"Company\",\n    },\n    {\n      label: \"Personal\",\n    },\n  ];\n\n  companyColumns = [\n    {\n      Header: \"Company Name\",\n      accessor: \"attributes.business_name\",\n    },\n    {\n      Header: \"Email\",\n      accessor: \"attributes.email\",\n    },\n\n    {\n      Header: \"Action\",\n      accessor: \"\",\n      Cell: (props) => (\n        <div>\n          <img\n            className=\"mr-2\"\n            style={{ width: \"15px\", cursor: \"pointer\" }}\n            src=\"https://storage.googleapis.com/spaces-semanggi-app/back-office/super-entity/png/border-color-24px.png\"\n            onClick={() => \n              this.setState({modal: true, userId: props.cell.row.original.attributes.id})\n            }\n          />\n        </div>\n      ),\n    },\n  ];\n\n  columns = [\n    {\n      Header: \"Full Name\",\n      accessor: \"attributes.full_name\",\n    },\n    {\n      Header: \"User Name\",\n      accessor: \"attributes.username\",\n    },\n    {\n      Header: \"Email\",\n      accessor: \"attributes.email\",\n    },\n\n    {\n      Header: \"Action\",\n      accessor: \"\",\n      Cell: (props) => (\n        <div>\n          <img\n            className=\"mr-2\"\n            style={{ width: \"15px\", cursor: \"pointer\" }}\n            src=\"https://storage.googleapis.com/spaces-semanggi-app/back-office/super-entity/png/border-color-24px.png\"\n            // onClick={() =>\n            //   this.openEditBillingInvoiceModal(props.cell.row.original)\n            // }\n          />\n        </div>\n      ),\n    },\n  ];\n\n  async componentDidMount() {\n    await this.props.getUsers(this.state.getUserOpts);\n  }\n\n  handleSelectTab = (index) => {\n    const label = this.TABS[index].label;\n    this.setState({\n      tab: label,\n    });\n  };\n\n  handleAssignCompanyToReseller = async () => {\n    let response = await this.props.assignCompanyToReseller(\n      this.state.userId,\n      {},\n      {}\n    );\n\n    // if(response){\n      await this.props.getUsers(this.state.getUserOpts);\n      this.setState({\n        userId: null,\n        modal: false\n      })\n  \n      addNotification({\n        level: \"success\",\n        message: \"Success assigned company to reseller!\",\n      });\n    // }\n\n  }\n\n  render() {\n    let tabIndex = 0;\n    if (this.state.tab) {\n      const selectedTab = this.TABS.findIndex(\n        (tab) => tab.label === this.state.tab\n      );\n      if (selectedTab >= 0) {\n        tabIndex = selectedTab;\n      }\n    }\n    return (\n      <Layout title=\"Master Data\" classname=\"dashboard theme-light\">\n        <Modal\n            show={this.state.modal}\n            onHide={() => this.setState({\n                modal: false\n            })}\n            dialogClassName=\"modal-90w\"\n            aria-labelledby=\"example-custom-modal-styling-title\"\n            centered\n            backdrop=\"static\"\n            class=\"modal-backdrop foo-modal-backdrop in\"\n            keyboard={false}\n        >\n            <Modal.Header closeButton>\n            <Modal.Title>Assign Company As Reseller</Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n              <span className=\"text-center\">Are you sure you want to make this company as a reseller?</span>\n            </Modal.Body>\n            <Modal.Footer>\n            <Button variant=\"secondary\" onClick={() => this.setState({\n                modal: false\n            })}>\n                Close\n            </Button>\n            <Button variant=\"primary\" onClick={this.handleAssignCompanyToReseller}>Save</Button>\n            </Modal.Footer>\n        </Modal>\n        <Row>\n          <Col lg={12} md={12} sm={12}>\n            <Card style={{ backgroundColor: \"white\", borderRadius: \"10px\" }}>\n              <Row\n                className=\"position-relative show-grid\"\n                style={{ margin: \"20px 20px 0px 20px\" }}\n              >\n                <Col xs={12}>\n                  <Row\n                    className=\"position-relative show-grid\"\n                    style={{ margin: \"40px 20px 0px 20px\" }}\n                  >\n                    <Col xs={12}>\n                      <Tabs\n                        onSelect={this.handleSelectTab}\n                        selectedIndex={tabIndex}\n                      >\n                        <TabList>\n                          {this.TABS.map((tab) => (\n                            <Tab key={tab.label}>{tab.label}</Tab>\n                          ))}\n                        </TabList>\n\n                        <TabPanel className=\"mt-5\">\n                          <DataTable2\n                            data={this.props.companyData}\n                            columns={this.companyColumns}\n                            hideHeader={true}\n                          />\n                        </TabPanel>\n                        <TabPanel>\n                          <DataTable2\n                            data={this.props.userData}\n                            columns={this.columns}\n                            hideHeader={true}\n                          />\n                        </TabPanel>\n                      </Tabs>\n                    </Col>\n                  </Row>\n                </Col>\n              </Row>\n            </Card>\n          </Col>\n        </Row>\n      </Layout>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  const companyData = state.company.companies;\n  const companyIncludeData = state.company.include;\n  const companyTotalData = state.company.total;\n\n  const userData = state.user.data;\n  const userIncludeData = state.user.include;\n  const userTotalData = state.user.total;  \n\n  return {\n    companyData,\n    companyIncludeData,\n    companyTotalData,\n    \n    userData,\n    userIncludeData,\n    userTotalData\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    getUsers: (opts) => dispatch(getUsers(opts)),\n    assignCompanyToReseller: (id, payload, opts) =>\n      dispatch(assignCompanyToReseller(id, payload, opts)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MasterData);\n"]},"metadata":{},"sourceType":"module"}