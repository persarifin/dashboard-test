{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/arifin/Documents/semanggi/semanggi-bo/src/service/httpCLient.js\";\nimport axios from \"axios\";\nimport { toast } from \"react-toastify\";\nimport NProgress from \"nprogress\";\nimport Router from \"next/router\";\nimport ReactHtmlParser from \"react-html-parser\"; // import AuthService from '../service/auth.service'\n\nvar axiosInstance = axios.create({\n  baseURL: process.env.REACT_APP_API_URL,\n  timeout: 1000 * (60 * 3)\n});\naxiosInstance.interceptors.request.use(function (config) {\n  NProgress.start();\n  return config;\n}, function (error) {\n  // console.error(error)\n  return Promise.reject(error);\n});\naxiosInstance.interceptors.response.use(function (response) {\n  NProgress.done();\n  return Promise.resolve(response);\n}, function (error) {\n  if (!error.response || error.code === 'ECONNABORTED') {\n    toast.error(\"Please check your internet connection.\", {\n      position: toast.POSITION.TOP_RIGHT,\n      autoClose: 3000\n    });\n  } else {\n    var message = buildErrorMessage(error);\n    toast.error( /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        style: {\n          color: \"white\",\n          fontWeight: \"bold\"\n        },\n        children: \"Oops Error!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 11\n      }, this), ReactHtmlParser(message)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }, this), {\n      position: toast.POSITION.TOP_RIGHT,\n      autoClose: 1000 * 5\n    }); // check if session expired\n\n    if (error.response.status == 401) {\n      localStorage.removeItem(\"___user_data\");\n      return Router.replace(\"/login\");\n    }\n  }\n\n  NProgress.done();\n  return Promise.reject();\n});\n\nvar buildErrorMessage = function buildErrorMessage(error) {\n  var message = \"\";\n\n  if (error.response.data) {\n    if (error.response.data.data) {\n      message = error.response.data.data;\n    } else if (error.response.data.values) {\n      message = error.response.data.values;\n    } else {\n      message = error.response.data.message;\n    }\n  } // let message =\n  //   error.response.data && error.response.data.data\n  //     ? error.response.data.data\n  //     : error.response.data.message\n  //     ? error.response.data.message\n  //     : null;\n\n\n  var flashMessage = [];\n\n  if (typeof message === \"object\") {\n    for (var _i = 0, _Object$keys = Object.keys(message); _i < _Object$keys.length; _i++) {\n      var err = _Object$keys[_i];\n\n      if (message[err].length > 0) {\n        flashMessage.push(message[err][0]);\n      } else {\n        flashMessage.push(message[err]);\n      }\n    }\n  } else {\n    flashMessage = message;\n  }\n\n  if (Array.isArray(flashMessage) && flashMessage.length > 0) {\n    flashMessage = flashMessage.join(\"<br/>\");\n  } else {\n    flashMessage = flashMessage;\n  }\n\n  return flashMessage;\n};\n\nexport default axiosInstance;","map":{"version":3,"sources":["/home/arifin/Documents/semanggi/semanggi-bo/src/service/httpCLient.js"],"names":["axios","toast","NProgress","Router","ReactHtmlParser","axiosInstance","create","baseURL","process","env","REACT_APP_API_URL","timeout","interceptors","request","use","config","start","error","Promise","reject","response","done","resolve","code","position","POSITION","TOP_RIGHT","autoClose","message","buildErrorMessage","color","fontWeight","status","localStorage","removeItem","replace","data","values","flashMessage","Object","keys","err","length","push","Array","isArray","join"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { toast } from \"react-toastify\";\nimport NProgress from \"nprogress\";\nimport Router from \"next/router\";\nimport ReactHtmlParser from \"react-html-parser\";\n\n// import AuthService from '../service/auth.service'\nconst axiosInstance = axios.create({\n  baseURL: process.env.REACT_APP_API_URL,\n  timeout: 1000 * (60 * 3),\n});\n\naxiosInstance.interceptors.request.use(\n  function (config) {\n    NProgress.start();\n    return config;\n  },\n  function (error) {\n    // console.error(error)\n    return Promise.reject(error);\n  }\n);\n\naxiosInstance.interceptors.response.use(\n  function (response) {\n    NProgress.done();\n    return Promise.resolve(response);\n  },\n  function (error) {\n    if (!error.response || error.code === 'ECONNABORTED') {\n      toast.error(\"Please check your internet connection.\", {\n        position: toast.POSITION.TOP_RIGHT,\n        autoClose: 3000,\n      });\n    } else {\n      let message = buildErrorMessage(error);\n\n      toast.error(\n        <div>\n          <h4 style={{ color: \"white\", fontWeight: \"bold\" }}>Oops Error!</h4>\n          {ReactHtmlParser(message)}\n        </div>,\n        {\n          position: toast.POSITION.TOP_RIGHT,\n          autoClose: 1000 * 5,\n        }\n      );\n      // check if session expired\n      if (error.response.status == 401) {\n        localStorage.removeItem(\"___user_data\");\n        return Router.replace(\"/login\");\n      }\n    }\n    NProgress.done();\n    return Promise.reject();\n  }\n);\n\nconst buildErrorMessage = (error) => {\n  let message = \"\";\n  if (error.response.data) {\n    if (error.response.data.data) {\n      message = error.response.data.data;\n    } else if (error.response.data.values) {\n      message = error.response.data.values;\n    } else {\n      message = error.response.data.message;\n    }\n  }\n  // let message =\n  //   error.response.data && error.response.data.data\n  //     ? error.response.data.data\n  //     : error.response.data.message\n  //     ? error.response.data.message\n  //     : null;\n  let flashMessage = [];\n\n  if (typeof message === \"object\") {\n    for (let err of Object.keys(message)) {\n      if (message[err].length > 0) {\n        flashMessage.push(message[err][0]);\n      } else {\n        flashMessage.push(message[err]);\n      }\n    }\n  } else {\n    flashMessage = message;\n  }\n\n  if (Array.isArray(flashMessage) && flashMessage.length > 0) {\n    flashMessage = flashMessage.join(\"<br/>\");\n  } else {\n    flashMessage = flashMessage;\n  }\n  return flashMessage;\n};\n\nexport default axiosInstance;\n"]},"metadata":{},"sourceType":"module"}